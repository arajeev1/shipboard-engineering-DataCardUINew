<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
      layout:decorate="layout/mainLayout">
      
      <head>
        <title>Email Configurations</title>
    </head>
    <body>
    	<div layout:fragment="pageHeader">
          	<section class="content-header">
	        	<h1>
	            	Email Configurations
	          	</h1>
	        </section>
        </div>
        
    	<div layout:fragment="content">
	        
              <div class="box box-warning">
                <div class="box-header with-border">
                  <h3 class="box-title">Email Settings</h3>
                </div><!-- /.box-header -->
                <div class="box-body">
                  <form role="form" th:action="@{/emailConfig}" th:object="${emailConfig}" method="post" onsubmit="return formValidation();">
<!--                   	<p th:if="${#fields.hasErrors('global')}" th:errors="*{global}" th:class="text-red">Incorrect data</p> -->
                    <!-- text input -->
                    <div class="form-group" th:classappend="${#fields.hasErrors('emailHost')}? 'has-error'">
                      <label>Email Host Name</label>
                      <span id = "emailHostmsg" style="float: right;font-weight: bold;color: red;"> </span>
                      <input type="text" class="form-control" name="emailHost" th:field="*{emailHost}" 
                      value="${emailConfig.emailHost}" placeholder="Enter Email Host Name"/>
                      <p th:if="${#fields.hasErrors('emailHost')}" th:errors="*{emailHost}" th:class="text-red">Incorrect data</p>
                    </div>
                    
                    <div class="form-group" th:classappend="${#fields.hasErrors('emailUsername')}? 'has-error'">
                      <label>Email Username</label>
                      <span id = "emailUsernamemsg" style="float: right;font-weight: bold;color: red;"> </span>
                      <input type="text" class="form-control" name="emailUsername" th:field="*{emailUsername}" 
                      autocomplete= "off" placeholder="Enter Email Username"/>
                      <p th:if="${#fields.hasErrors('emailUsername')}" th:errors="*{emailUsername}" th:class="text-red">Incorrect data</p>
                    </div>
                    
                    <div class="form-group" th:classappend="${#fields.hasErrors('emailPassword')}? 'has-error'">
                      <label>Email Password</label>
                      <span id = "emailPasswordmsg" style="float: right;font-weight: bold;color: red;"> </span>
                      <input type="text" class="form-control" name="emailPassword" th:field="*{emailPassword}"  
                      autocomplete= "off" placeholder="Enter Email password"/>
                      <p th:if="${#fields.hasErrors('emailPassword')}" th:errors="*{emailPassword}" th:class="text-red">Incorrect data</p>
                    </div>
					
					<div class="form-group" th:classappend="${#fields.hasErrors('emailPort')}? 'has-error'">
                      <label>Email Port No.</label>
                      <span id = "emailPortmsg" style="float: right;font-weight: bold;color: red;"> </span>
                      <input type="text" class="form-control" name="emailPort" th:field="*{emailPort}" placeholder="Enter Email Port No."/>
                      <p th:if="${#fields.hasErrors('emailPort')}" th:errors="*{emailPort}" th:class="text-red">Incorrect data</p>
                    </div>
					<input type="hidden" name="createdBy" value="Admin" />
    				<input type="hidden" name="id" th:field="*{id}" />
    				
					<div class="box-footer">
	                    <button type="submit" class="btn btn-primary">Submit</button>
	                </div>
                  </form>
                  
                  <div th:if="${info}" class="col-md-3 alert alert-info alert-dismissable" style="width: 295px;">
	          		<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
		        	<p><i class="icon fa fa-info"></i> <span th:text="${info}">Info</span></p>
		          </div>
                  
			        <div th:if="${error}" class="col-md-3 alert alert-danger alert-dismissable" style="width: 295px;">
			        	<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
			        	<p><i class="icon fa fa-ban"></i> <span th:text="${error}">Error</span></p>
			        </div>
                </div><!-- /.box-body -->
              </div><!-- /.box -->
    	</div>
    	
    </body>
    <script>
			//<![CDATA[
		    	//$(document).ready(function() {
		    		
		    		function formValidation() {
		    			
		    			alert("hi");
		    			return false;
		    			/*var status = true;
		    			var ehost = $("#emailHost").val().trim();
		    			var euname = $("#emailUsername").val().trim();
		    			var epass = $("#emailPassword").val().trim();
		    			var eport = $("#emailPort").val().trim();
		    			var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
		    			if (ehost.length = 0) {
		    				$('#emailHostmsg').text('Please provide a valid email host');
							$('#emailHost').css("border-color","red");
							$('#emailHost').focus();
							status = false;
						}
		    			if (!filter.test(euname)) {
		    				$('#emailUsernamemsg').text('Please provide a valid email address');
							$('#emailUsername').css("border-color","red");
							$('#emailUsername').focus();
							status = false;
						}
		    			if (euname.length = 0) {
		    				$('#emailUsernamemsg').text('Please provide a valid email address');
							$('#emailUsername').css("border-color","red");
							$('#emailUsername').focus();
							status = false;
						}
		    			if (epass.length = 0) {
		    				$('#emailPasswordmsg').text('Please provide email password');
							$('#emailPassword').css("border-color","red");
							$('#emailPassword').focus();
							status = false;
						}
		    			if (eport.length = 0) {
		    				$('#emailPortmsg').text('Please provide a valid email port');
							$('#emailPort').css("border-color","red");
							$('#emailPort').focus();
							status = false;
						}
		    			return status;
		    		}*/
        
		    	//});
		    	// ]]>
		    	</script>
					
    
</html>